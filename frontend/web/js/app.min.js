(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

$(function () {

    // --------------------------------------------------------------------------
    // Svg Polyfill
    // --------------------------------------------------------------------------

    svg4everybody();

    // --------------------------------------------------------------------------
    // Header - Sticky
    // --------------------------------------------------------------------------

    function sticky() {

        var offsetScroll = window.pageYOffset || document.documentElement.scrollTop;

        if (offsetScroll > 0) {
            $('html').addClass('is-sticky');
        } else {
            $('html').removeClass('is-sticky');
        }
    }

    sticky();

    $(window).on('scroll', function (event) {
        sticky();
    });

    // --------------------------------------------------------------------------
    // Header - Nav
    // --------------------------------------------------------------------------


    $('.nav').on('click', '.nav__btn', function (event) {
        event.preventDefault();
        if ($('html').is('.is-nav-open')) {
            $('html').removeClass('is-nav-open');
        } else {
            $('html').addClass('is-nav-open');
        }
    });

    // --------------------------------------------------------------------------
    // Header - Signin
    // --------------------------------------------------------------------------


    $(document).on('click', '.signin__btn', function (event) {
        event.preventDefault();

        if ($('html').is('.is-signin-open')) {

            $('html').removeClass('is-signin-open');
        } else {

            $('html').addClass('is-signin-open');
        }
    });

    $(document).on('click', function (event) {

        if ($(event.target).closest('.signin').length == 0) {
            $('html').removeClass('is-signin-open');
        }
    });

    // --------------------------------------------------------------------------
    // Header - Language
    // --------------------------------------------------------------------------


    $(document).on('click', '.language__btn', function (event) {
        event.preventDefault();

        if ($('html').is('.is-language-open')) {

            $('html').removeClass('is-language-open');
        } else {

            $('html').addClass('is-language-open');
        }
    });

    $(document).on('click', function (event) {

        if ($(event.target).closest('.language').length == 0) {
            $('html').removeClass('is-language-open');
        }
    });

    // --------------------------------------------------------------------------
    // Slides
    // --------------------------------------------------------------------------


    var slickPrev = '<button class="slick-arrow slick-prev"><svg class="icon-prev"><use xlink:href="sprites/sprite.svg#icon-prev"></use></svg></button>',
        slickNext = '<button class="slick-arrow slick-next"><svg class="icon-next"><use xlink:href="sprites/sprite.svg#icon-next"></use></svg></button>',
        slickPrevVertical = '<button class="slick-arrow slick-prev"><svg class="icon-prev-vertical"><use xlink:href="sprites/sprite.svg#icon-prev-vertical"></use></svg></button>',
        slickNextVertical = '<button class="slick-arrow slick-next"><svg class="icon-next-vertical"><use xlink:href="sprites/sprite.svg#icon-next-vertical"></use></svg></button>';

    // Hero Slides


    $('.js-slick-hero').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: true,
        dots: true,
        fade: false,
        infinite: true,
        nextArrow: slickNext,
        prevArrow: slickPrev,
        autoplay: false,
        pauseOnHover: false,
        autoplaySpeed: 10000,
        responsive: [{
            breakpoint: 767,
            settings: {
                adaptiveHeight: true,
                autoplay: false
            }
        }]
    });

    setTimeout(function () {

        var mq = $(window).width();

        if (mq >= 768) {
            $('.js-slick-hero').slick('slickPlay');
        }
    }, 5000);

    // Images Slides

    $('.js-reviews').each(function () {

        var reviews = $(this),
            reviewsSlides = reviews.find('.js-reviews-slides'),
            reviewsThumbs = reviews.find('.js-reviews-thumbs');

        reviewsSlides.slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            dots: false,
            fade: true,
            infinite: true,
            asNavFor: reviewsThumbs,
            nextArrow: slickNext,
            prevArrow: slickPrev
        });

        reviewsThumbs.slick({
            vertical: true,
            centerMode: true,
            centerPadding: 0,
            slidesToShow: 3,
            slidesToScroll: 1,
            asNavFor: reviewsSlides,
            arrows: true,
            dots: false,
            focusOnSelect: true,
            nextArrow: slickNextVertical,
            prevArrow: slickPrevVertical,
            infinite: true,
            responsive: [{
                breakpoint: 991,
                settings: {
                    vertical: false
                }
            }, {
                breakpoint: 767,
                settings: {
                    slidesToShow: 1,
                    vertical: false
                }
            }]

        });
    });

    // --------------------------------------------------------------------------
    // Fancybox
    // --------------------------------------------------------------------------


    $('[data-fancybox]').fancybox({
        type: 'inline',
        touch: false,
        buttons: []
    });

    // --------------------------------------------------------------------------
    // Forms
    // --------------------------------------------------------------------------

    $('select').styler({
        selectSearch: false,
        selectSmartPositioning: false
    });

    // --------------------------------------------------------------------------
    // Phone
    // --------------------------------------------------------------------------

    $('input[type=tel]').inputmask({ "mask": "+7 (999) 999-99-99", showMaskOnFocus: true });

    // --------------------------------------------------------------------------
    // Accordion
    // --------------------------------------------------------------------------


    $('.js-accordion').on('click', 'dt', function (event) {
        event.preventDefault();

        if ($(this).is('.is-active')) {

            $(this).removeClass('is-active').next('dd').slideUp('fast');
        } else {
            $(this).closest('.js-accordion').find('dt').removeClass('is-active');
            $(this).closest('.js-accordion').find('dd').slideUp('fast');
            $(this).addClass('is-active').next('dd').slideDown('fast');
        }
    });

    // --------------------------------------------------------------------------
    // ScrollTo
    // --------------------------------------------------------------------------


    $('.js-scrollto').on('click', function (event) {
        event.preventDefault();

        var href = $(this).attr('href'),
            offsetTop = $(href).offset().top;

        $('html, body').animate({
            scrollTop: offsetTop - $('.header').height() - 14
        }, 500);
    });

    // --------------------------------------------------------------------------
    // Validate
    // --------------------------------------------------------------------------

    $.validator.addMethod("regexp", function (value, element) {
        return this.optional(element) || /^\+\d \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(value);
    });

    var validateErrorPlacement = function validateErrorPlacement(error, element) {
        error.addClass('ui-validate');
        error.appendTo(element.closest('.ui-field'));
    };

    var validateHighlight = function validateHighlight(element) {
        $(element).parent().addClass("is-error").removeClass('is-valid');
    };
    var validateUnhighlight = function validateUnhighlight(element) {
        $(element).parent().addClass('is-valid').removeClass("is-error");
    };

    $('.js-validate').each(function (index, value) {

        $(this).validate({
            errorElement: "span",
            ignore: ":disabled,:hidden",
            highlight: validateHighlight,
            unhighlight: validateUnhighlight,
            rules: {
                fullname: "required",
                tel: {
                    required: true,
                    regexp: true
                },
                email: {
                    required: true,
                    email: true
                },
                message: "required",
                city: "required",
                index: "required",
                address: "required",
                password: "required",
                passwordconfirm: {
                    required: true,
                    equalTo: "#password"
                },
                accept: "required"

            },
            messages: {
                fullname: 'Вы не ввели ФИО',
                tel: 'Вы не ввели номер телефона',
                email: 'Введите email',
                city: 'Введите город',
                index: 'Введите индекс',
                address: 'Введите адрес',
                message: 'Введите сообщение',
                password: 'Введите пароль',
                passwordconfirm: {
                    required: 'Повторите пароль',
                    equalTo: 'Пароли не совпадают'
                },
                accept: 'Подтвердите условия'
            },
            errorPlacement: validateErrorPlacement,
            submitHandler: function submitHandler(form) {

                $.ajax({
                    type: 'POST',
                    url: '/login',
                    dataType: 'JSON',
                    contentType: 'application/json',
                    data: $(form).serialize(),
                    success: function success(form) {
                        console.log(form.statusText);
                    },
                    error: function error(form) {
                        console.log(form.statusText);
                    }
                });

                event.preventDefault();
            }
        });
    });
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxFQUFFLFlBQVk7O0FBR1Y7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxhQUFTLE1BQVQsR0FBa0I7O0FBRWQsWUFBSSxlQUFlLE9BQU8sV0FBUCxJQUFzQixTQUFTLGVBQVQsQ0FBeUIsU0FBbEU7O0FBRUEsWUFBSSxlQUFlLENBQW5CLEVBQXNCO0FBQ2xCLGNBQUUsTUFBRixFQUFVLFFBQVYsQ0FBbUIsV0FBbkI7QUFDSCxTQUZELE1BR0s7QUFDRCxjQUFFLE1BQUYsRUFBVSxXQUFWLENBQXNCLFdBQXRCO0FBQ0g7QUFFSjs7QUFFRDs7QUFFQSxNQUFFLE1BQUYsRUFBVSxFQUFWLENBQWEsUUFBYixFQUF1QixVQUFVLEtBQVYsRUFBaUI7QUFDcEM7QUFDSCxLQUZEOztBQUtBO0FBQ0E7QUFDQTs7O0FBR0EsTUFBRSxNQUFGLEVBQVUsRUFBVixDQUFhLE9BQWIsRUFBc0IsV0FBdEIsRUFBbUMsVUFBVSxLQUFWLEVBQWlCO0FBQ2hELGNBQU0sY0FBTjtBQUNBLFlBQUksRUFBRSxNQUFGLEVBQVUsRUFBVixDQUFhLGNBQWIsQ0FBSixFQUFrQztBQUM5QixjQUFFLE1BQUYsRUFBVSxXQUFWLENBQXNCLGFBQXRCO0FBQ0gsU0FGRCxNQUdLO0FBQ0QsY0FBRSxNQUFGLEVBQVUsUUFBVixDQUFtQixhQUFuQjtBQUNIO0FBQ0osS0FSRDs7QUFVQTtBQUNBO0FBQ0E7OztBQUdBLE1BQUUsUUFBRixFQUFZLEVBQVosQ0FBZSxPQUFmLEVBQXdCLGNBQXhCLEVBQXdDLFVBQVUsS0FBVixFQUFpQjtBQUNyRCxjQUFNLGNBQU47O0FBRUEsWUFBSSxFQUFFLE1BQUYsRUFBVSxFQUFWLENBQWEsaUJBQWIsQ0FBSixFQUFxQzs7QUFFakMsY0FBRSxNQUFGLEVBQVUsV0FBVixDQUFzQixnQkFB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LE1BREg7QUFFSCx5QkFBSyxRQUZGO0FBR0gsOEJBQVUsTUFIUDtBQUlILGlDQUFZLGtCQUpUO0FBS0gsMEJBQU0sRUFBRSxJQUFGLEVBQVEsU0FBUixFQUxIO0FBTUgsNkJBQVMsaUJBQVUsSUFBVixFQUFnQjtBQUNyQixnQ0FBUSxHQUFSLENBQVksS0FBSyxVQUFqQjtBQUNILHFCQVJFO0FBU0gsMkJBQU8sZUFBVSxJQUFWLEVBQWdCO0FBQ25CLGdDQUFRLEdBQVIsQ0FBWSxLQUFLLFVBQWpCO0FBQ0g7QUFYRSxpQkFBUDs7QUFjQSxzQkFBTSxjQUFOO0FBQ0g7QUE1RFksU0FBakI7QUErREgsS0FqRUQ7QUFvRUgsQ0EvV0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIkKGZ1bmN0aW9uICgpIHtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTdmcgUG9seWZpbGxcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgc3ZnNGV2ZXJ5Ym9keSgpO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBIZWFkZXIgLSBTdGlja3lcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgZnVuY3Rpb24gc3RpY2t5KCkge1xuXG4gICAgICAgIHZhciBvZmZzZXRTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblxuICAgICAgICBpZiAob2Zmc2V0U2Nyb2xsID4gMCkge1xuICAgICAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdpcy1zdGlja3knKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnaXMtc3RpY2t5Jyk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHN0aWNreSgpO1xuXG4gICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc3RpY2t5KCk7XG4gICAgfSk7XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gSGVhZGVyIC0gTmF2XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gICAgJCgnLm5hdicpLm9uKCdjbGljaycsICcubmF2X19idG4nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCQoJ2h0bWwnKS5pcygnLmlzLW5hdi1vcGVuJykpIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnaXMtbmF2LW9wZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnaXMtbmF2LW9wZW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBIZWFkZXIgLSBTaWduaW5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNpZ25pbl9fYnRuJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgaWYgKCQoJ2h0bWwnKS5pcygnLmlzLXNpZ25pbi1vcGVuJykpIHtcblxuICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdpcy1zaWduaW4tb3BlbicpO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICQoJ2h0bWwnKS5hZGRDbGFzcygnaXMtc2lnbmluLW9wZW4nKTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXG4gICAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCgnLnNpZ25pbicpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2lzLXNpZ25pbi1vcGVuJyk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBIZWFkZXIgLSBMYW5ndWFnZVxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcubGFuZ3VhZ2VfX2J0bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmICgkKCdodG1sJykuaXMoJy5pcy1sYW5ndWFnZS1vcGVuJykpIHtcblxuICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdpcy1sYW5ndWFnZS1vcGVuJyk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdpcy1sYW5ndWFnZS1vcGVuJyk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblxuICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5sYW5ndWFnZScpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAkKCdodG1sJykucmVtb3ZlQ2xhc3MoJ2lzLWxhbmd1YWdlLW9wZW4nKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gU2xpZGVzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gICAgdmFyIHNsaWNrUHJldiA9ICc8YnV0dG9uIGNsYXNzPVwic2xpY2stYXJyb3cgc2xpY2stcHJldlwiPjxzdmcgY2xhc3M9XCJpY29uLXByZXZcIj48dXNlIHhsaW5rOmhyZWY9XCJzcHJpdGVzL3Nwcml0ZS5zdmcjaWNvbi1wcmV2XCI+PC91c2U+PC9zdmc+PC9idXR0b24+JyxcbiAgICAgICAgc2xpY2tOZXh0ID0gJzxidXR0b24gY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1uZXh0XCI+PHN2ZyBjbGFzcz1cImljb24tbmV4dFwiPjx1c2UgeGxpbms6aHJlZj1cInNwcml0ZXMvc3ByaXRlLnN2ZyNpY29uLW5leHRcIj48L3VzZT48L3N2Zz48L2J1dHRvbj4nLFxuICAgICAgICBzbGlja1ByZXZWZXJ0aWNhbCA9ICc8YnV0dG9uIGNsYXNzPVwic2xpY2stYXJyb3cgc2xpY2stcHJldlwiPjxzdmcgY2xhc3M9XCJpY29uLXByZXYtdmVydGljYWxcIj48dXNlIHhsaW5rOmhyZWY9XCJzcHJpdGVzL3Nwcml0ZS5zdmcjaWNvbi1wcmV2LXZlcnRpY2FsXCI+PC91c2U+PC9zdmc+PC9idXR0b24+JyxcbiAgICAgICAgc2xpY2tOZXh0VmVydGljYWwgPSAnPGJ1dHRvbiBjbGFzcz1cInNsaWNrLWFycm93IHNsaWNrLW5leHRcIj48c3ZnIGNsYXNzPVwiaWNvbi1uZXh0LXZlcnRpY2FsXCI+PHVzZSB4bGluazpocmVmPVwic3ByaXRlcy9zcHJpdGUuc3ZnI2ljb24tbmV4dC12ZXJ0aWNhbFwiPjwvdXNlPjwvc3ZnPjwvYnV0dG9uPic7XG5cblxuICAgIC8vIEhlcm8gU2xpZGVzXG5cblxuICAgICQoJy5qcy1zbGljay1oZXJvJykuc2xpY2soe1xuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICBhcnJvd3M6IHRydWUsXG4gICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgIGZhZGU6IGZhbHNlLFxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgbmV4dEFycm93OiBzbGlja05leHQsXG4gICAgICAgIHByZXZBcnJvdzogc2xpY2tQcmV2LFxuICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgIGF1dG9wbGF5U3BlZWQ6IDEwMDAwLFxuICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9KTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBtcSA9ICQod2luZG93KS53aWR0aCgpO1xuXG4gICAgICAgIGlmIChtcSA+PSA3NjgpIHtcbiAgICAgICAgICAgICQoJy5qcy1zbGljay1oZXJvJykuc2xpY2soJ3NsaWNrUGxheScpO1xuICAgICAgICB9XG5cblxuICAgIH0sIDUwMDApO1xuXG5cbiAgICAvLyBJbWFnZXMgU2xpZGVzXG5cbiAgICAkKCcuanMtcmV2aWV3cycpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciByZXZpZXdzID0gJCh0aGlzKSxcbiAgICAgICAgICAgIHJldmlld3NTbGlkZXMgPSByZXZpZXdzLmZpbmQoJy5qcy1yZXZpZXdzLXNsaWRlcycpLFxuICAgICAgICAgICAgcmV2aWV3c1RodW1icyA9IHJldmlld3MuZmluZCgnLmpzLXJldmlld3MtdGh1bWJzJyk7XG5cblxuICAgICAgICByZXZpZXdzU2xpZGVzLnNsaWNrKHtcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgZmFkZTogdHJ1ZSxcbiAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICAgICAgYXNOYXZGb3I6IHJldmlld3NUaHVtYnMsXG4gICAgICAgICAgICBuZXh0QXJyb3c6IHNsaWNrTmV4dCxcbiAgICAgICAgICAgIHByZXZBcnJvdzogc2xpY2tQcmV2XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldmlld3NUaHVtYnMuc2xpY2soe1xuICAgICAgICAgICAgdmVydGljYWw6IHRydWUsXG4gICAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxuICAgICAgICAgICAgY2VudGVyUGFkZGluZzogMCxcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgYXNOYXZGb3I6IHJldmlld3NTbGlkZXMsXG4gICAgICAgICAgICBhcnJvd3M6IHRydWUsXG4gICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgIGZvY3VzT25TZWxlY3Q6IHRydWUsXG4gICAgICAgICAgICBuZXh0QXJyb3c6IHNsaWNrTmV4dFZlcnRpY2FsLFxuICAgICAgICAgICAgcHJldkFycm93OiBzbGlja1ByZXZWZXJ0aWNhbCxcbiAgICAgICAgICAgIGluZmluaXRlOiB0cnVlLFxuICAgICAgICAgICAgcmVzcG9uc2l2ZTogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogOTkxLFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF1cblxuICAgICAgICB9KTtcblxuXG4gICAgfSk7XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gRmFuY3lib3hcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbiAgICAkKCdbZGF0YS1mYW5jeWJveF0nKS5mYW5jeWJveCh7XG4gICAgICAgIHR5cGU6ICdpbmxpbmUnLFxuICAgICAgICB0b3VjaDogZmFsc2UsXG4gICAgICAgIGJ1dHRvbnM6IFtdXG4gICAgfSk7XG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIEZvcm1zXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICQoJ3NlbGVjdCcpLnN0eWxlcih7XG4gICAgICAgIHNlbGVjdFNlYXJjaDogZmFsc2UsXG4gICAgICAgIHNlbGVjdFNtYXJ0UG9zaXRpb25pbmc6IGZhbHNlXG4gICAgfSk7XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gUGhvbmVcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgJCgnaW5wdXRbdHlwZT10ZWxdJykuaW5wdXRtYXNrKHtcIm1hc2tcIjogXCIrNyAoOTk5KSA5OTktOTktOTlcIiwgc2hvd01hc2tPbkZvY3VzOiB0cnVlfSk7XG5cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQWNjb3JkaW9uXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gICAgJCgnLmpzLWFjY29yZGlvbicpLm9uKCdjbGljaycsICdkdCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmICgkKHRoaXMpLmlzKCcuaXMtYWN0aXZlJykpIHtcblxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJykubmV4dCgnZGQnKS5zbGlkZVVwKCdmYXN0Jyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmpzLWFjY29yZGlvbicpLmZpbmQoJ2R0JykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuanMtYWNjb3JkaW9uJykuZmluZCgnZGQnKS5zbGlkZVVwKCdmYXN0Jyk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKS5uZXh0KCdkZCcpLnNsaWRlRG93bignZmFzdCcpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBTY3JvbGxUb1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuICAgICQoJy5qcy1zY3JvbGx0bycpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICBvZmZzZXRUb3AgPSAkKGhyZWYpLm9mZnNldCgpLnRvcDtcblxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IG9mZnNldFRvcCAtICQoJy5oZWFkZXInKS5oZWlnaHQoKSAtIDE0XG4gICAgICAgIH0sIDUwMCk7XG5cbiAgICB9KTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gVmFsaWRhdGVcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwicmVnZXhwXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlxcK1xcZCBcXChcXGR7M31cXCkgXFxkezN9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KHZhbHVlKTtcbiAgICB9KTtcblxuXG4gICAgdmFyIHZhbGlkYXRlRXJyb3JQbGFjZW1lbnQgPSBmdW5jdGlvbiAoZXJyb3IsIGVsZW1lbnQpIHtcbiAgICAgICAgZXJyb3IuYWRkQ2xhc3MoJ3VpLXZhbGlkYXRlJyk7XG4gICAgICAgIGVycm9yLmFwcGVuZFRvKGVsZW1lbnQuY2xvc2VzdCgnLnVpLWZpZWxkJykpO1xuICAgIH1cblxuICAgIHZhciB2YWxpZGF0ZUhpZ2hsaWdodCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICQoZWxlbWVudCkucGFyZW50KCkuYWRkQ2xhc3MoXCJpcy1lcnJvclwiKS5yZW1vdmVDbGFzcygnaXMtdmFsaWQnKTtcbiAgICB9XG4gICAgdmFyIHZhbGlkYXRlVW5oaWdobGlnaHQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAkKGVsZW1lbnQpLnBhcmVudCgpLmFkZENsYXNzKCdpcy12YWxpZCcpLnJlbW92ZUNsYXNzKFwiaXMtZXJyb3JcIilcbiAgICB9XG5cblxuICAgICQoJy5qcy12YWxpZGF0ZScpLmVhY2goZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkge1xuXG4gICAgICAgICQodGhpcykudmFsaWRhdGUoe1xuICAgICAgICAgICAgZXJyb3JFbGVtZW50OiBcInNwYW5cIixcbiAgICAgICAgICAgIGlnbm9yZTogXCI6ZGlzYWJsZWQsOmhpZGRlblwiLFxuICAgICAgICAgICAgaGlnaGxpZ2h0OiB2YWxpZGF0ZUhpZ2hsaWdodCxcbiAgICAgICAgICAgIHVuaGlnaGxpZ2h0OiB2YWxpZGF0ZVVuaGlnaGxpZ2h0LFxuICAgICAgICAgICAgcnVsZXM6IHtcbiAgICAgICAgICAgICAgICBmdWxsbmFtZTogXCJyZXF1aXJlZFwiLFxuICAgICAgICAgICAgICAgIHRlbDoge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVnZXhwOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlbWFpbDoge1xuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwicmVxdWlyZWRcIixcbiAgICAgICAgICAgICAgICBjaXR5OiBcInJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgaW5kZXg6IFwicmVxdWlyZWRcIixcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiBcInJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFwicmVxdWlyZWRcIixcbiAgICAgICAgICAgICAgICBwYXNzd29yZGNvbmZpcm06IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVxdWFsVG86IFwiI3Bhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjY2VwdDogXCJyZXF1aXJlZFwiXG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlczoge1xuICAgICAgICAgICAgICAgIGZ1bGxuYW1lOiAn0JLRiyDQvdC1INCy0LLQtdC70Lgg0KTQmNCeJyxcbiAgICAgICAgICAgICAgICB0ZWw6ICfQktGLINC90LUg0LLQstC10LvQuCDQvdC+0LzQtdGAINGC0LXQu9C10YTQvtC90LAnLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAn0JLQstC10LTQuNGC0LUgZW1haWwnLFxuICAgICAgICAgICAgICAgIGNpdHk6ICfQktCy0LXQtNC40YLQtSDQs9C+0YDQvtC0JyxcbiAgICAgICAgICAgICAgICBpbmRleDogJ9CS0LLQtdC00LjRgtC1INC40L3QtNC10LrRgScsXG4gICAgICAgICAgICAgICAgYWRkcmVzczogJ9CS0LLQtdC00LjRgtC1INCw0LTRgNC10YEnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfQktCy0LXQtNC40YLQtSDRgdC+0L7QsdGJ0LXQvdC40LUnLFxuICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAn0JLQstC10LTQuNGC0LUg0L/QsNGA0L7Qu9GMJyxcbiAgICAgICAgICAgICAgICBwYXNzd29yZGNvbmZpcm06IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6ICfQn9C+0LLRgtC+0YDQuNGC0LUg0L/QsNGA0L7Qu9GMJyxcbiAgICAgICAgICAgICAgICAgICAgZXF1YWxUbzogJ9Cf0LDRgNC+0LvQuCDQvdC1INGB0L7QstC/0LDQtNCw0Y7RgidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjY2VwdDogJ9Cf0L7QtNGC0LLQtdGA0LTQuNGC0LUg0YPRgdC70L7QstC40Y8nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3JQbGFjZW1lbnQ6IHZhbGlkYXRlRXJyb3JQbGFjZW1lbnQsXG4gICAgICAgICAgICBzdWJtaXRIYW5kbGVyOiBmdW5jdGlvbiAoZm9ybSkge1xuXG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ0pTT04nLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTonYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6ICQoZm9ybSkuc2VyaWFsaXplKCksXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChmb3JtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JtLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm0uc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cblxufSk7XG5cblxuIl19
