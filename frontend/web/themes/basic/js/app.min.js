(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

$(function () {
    $.fn.extend({
        bs_alert: function bs_alert(type, message, title) {
            if (type === 'error') {
                type = 'danger';
            }

            var cls = 'alert-' + type,
                html = '<div class="alert ' + cls + ' alert-dismissable">' + '<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>';
            if (typeof title !== 'undefined' && title !== '') {
                html += '<h4>' + title + '</h4>';
            }
            html += '<span>' + message + '</span></div>';
            $('.alert-block').append(html);
        }
    });

    /**
     * Prepare flash messages
     * @param {Object} flashList
     */
    function prepareFlash(flashList) {
        Object.keys(flashList).forEach(function (flashType) {
            flashList[flashType].forEach(function (flashMsg) {
                $('.alert-block').bs_alert(flashType, flashMsg);
            });
        });
    }

    /**
     * Prepare flash messages
     * @param {Object} formMessageList
     */
    function prepareFormMessage(formMessageList) {
        if (!formMessageList.length) {
            return;
        }

        debugger; // FIXME: delete before deploy!
        $('#signinform-email').closest('.form-group');
    }

    /**
     * Prepare response data
     * @param {Object} response
     */
    function prepareResponse(response) {
        prepareFlash(response.flash || []);
        prepareFormMessage(response.form || []);

        if (response.redirect) {
            window.location.replace(response.redirect);
        }
    }

    $('.js-validate').each(function () {
        $(this).validate({
            submitHandler: function submitHandler(form, e) {
                e.preventDefault();
                var data = $(form).serialize(); //$(form).data('type') === 'JSON' ? $(form).serializeArray() : $(form).serialize();

                $.ajax({
                    type: $(form).attr('method') || 'get',
                    url: $(form).attr('action') || '#',
                    data: data,
                    success: function success(response) {
                        prepareResponse(response);
                    },
                    error: function error(xhr, status, _error) {
                        console.log("Result: " + status + " " + _error + " " + xhr.status + " " + xhr.statusText);
                        console.log("Response text: " + xhr.responseText);
                        alert('error');
                    },
                    fail: function fail(xhr, status, error) {
                        console.log("Result: " + status + " " + error + " " + xhr.status + " " + xhr.statusText);
                        console.log("Response text: " + xhr.responseText);
                        alert('fail');
                    }
                });
            }
        });
    });

    // Svg Polyfill
    svg4everybody();

    // Header - Sticky
    function sticky() {
        var offsetScroll = window.pageYOffset || document.documentElement.scrollTop;
        if (offsetScroll > 0) {
            $('html').addClass('is-sticky');
        } else {
            $('html').removeClass('is-sticky');
        }
    }
    sticky();
    $(window).on('scroll', function () {
        sticky();
    });

    // Header - Nav
    $('.nav').on('click', '.nav__btn', function (event) {
        event.preventDefault();
        var htmlBlock = $('html');
        if (htmlBlock.is('.is-nav-open')) {
            htmlBlock.removeClass('is-nav-open');
        } else {
            htmlBlock.addClass('is-nav-open');
        }
    });

    // Header - Signin
    $(document).on('click', '.signin__btn', function (event) {
        event.preventDefault();
        var htmlBlock = $('html'),
            parent = $(this).closest('.signin');

        htmlBlock.is('.is-signin-form-open') ? htmlBlock.removeClass('is-signin-form-open') : htmlBlock.addClass('is-signin-form-open');

        parent.hasClass('open') ? parent.removeClass('open') : parent.addClass('open');
    });

    // Header - Language
    $(document).on('click', '.language__btn', function (event) {
        event.preventDefault();
        var htmlBlock = $('html');
        if (htmlBlock.is('.is-language-open')) {
            htmlBlock.removeClass('is-language-open');
        } else {
            htmlBlock.addClass('is-language-open');
        }
    });
    $(document).on('click', function (event) {
        if ($(event.target).closest('.language').length === 0) {
            $('html').removeClass('is-language-open');
        }
    });

    // Slides
    var slickPrev = '<button class="slick-arrow slick-prev"><svg class="icon-prev"><use xlink:href="/themes/basic/sprites/sprite.svg#icon-prev"></use></svg></button>',
        slickNext = '<button class="slick-arrow slick-next"><svg class="icon-next"><use xlink:href="/themes/basic/sprites/sprite.svg#icon-next"></use></svg></button>',
        slickPrevVertical = '<button class="slick-arrow slick-prev"><svg class="icon-prev-vertical"><use xlink:href="/themes/basic/sprites/sprite.svg#icon-prev-vertical"></use></svg></button>',
        slickNextVertical = '<button class="slick-arrow slick-next"><svg class="icon-next-vertical"><use xlink:href="/themes/basic/sprites/sprite.svg#icon-next-vertical"></use></svg></button>';

    // Hero Slides
    $('.js-slick-hero').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: true,
        dots: true,
        fade: false,
        infinite: true,
        nextArrow: slickNext,
        prevArrow: slickPrev,
        autoplay: false,
        pauseOnHover: false,
        autoplaySpeed: 10000,
        responsive: [{
            breakpoint: 767,
            settings: {
                adaptiveHeight: true,
                autoplay: false
            }
        }]
    });
    setTimeout(function () {
        var mq = $(window).width();

        if (mq >= 768) {
            $('.js-slick-hero').slick('slickPlay');
        }
    }, 5000);

    // Images Slides
    $('.js-reviews').each(function () {
        var reviews = $(this),
            reviewsSlides = reviews.find('.js-reviews-slides'),
            reviewsThumbs = reviews.find('.js-reviews-thumbs');

        reviewsSlides.slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            dots: false,
            fade: true,
            infinite: true,
            asNavFor: reviewsThumbs,
            nextArrow: slickNext,
            prevArrow: slickPrev
        });

        reviewsThumbs.slick({
            vertical: true,
            centerMode: true,
            centerPadding: 0,
            slidesToShow: 3,
            slidesToScroll: 1,
            asNavFor: reviewsSlides,
            arrows: true,
            dots: false,
            focusOnSelect: true,
            nextArrow: slickNextVertical,
            prevArrow: slickPrevVertical,
            infinite: true,
            responsive: [{
                breakpoint: 991,
                settings: {
                    vertical: false
                }
            }, {
                breakpoint: 767,
                settings: {
                    slidesToShow: 1,
                    vertical: false
                }
            }]
        });
    });

    // Fancybox
    $('[data-fancybox]').fancybox({
        type: 'inline',
        touch: false,
        buttons: []
    });

    // Forms
    $('select').styler({
        selectSearch: false,
        selectSmartPositioning: false
    });

    // Accordion
    $('.js-accordion').on('click', 'dt', function (event) {
        event.preventDefault();
        if ($(this).is('.is-active')) {
            $(this).removeClass('is-active').next('dd').slideUp('fast');
        } else {
            $(this).closest('.js-accordion').find('dt').removeClass('is-active');
            $(this).closest('.js-accordion').find('dd').slideUp('fast');
            $(this).addClass('is-active').next('dd').slideDown('fast');
        }
    });

    // ScrollTo
    $('.js-scrollto').on('click', function (event) {
        event.preventDefault();
        var href = $(this).attr('href'),
            offsetTop = $(href).offset().top;
        $('html, body').animate({
            scrollTop: offsetTop - $('.header').height() - 14
        }, 500);
    });
});

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQSxFQUFFLFlBQVk7QUFDVixNQUFFLEVBQUYsQ0FBSyxNQUFMLENBQVk7QUFDUixrQkFBVSxrQkFBVSxJQUFWLEVBQWdCLE9BQWhCLEVBQXlCLEtBQXpCLEVBQWdDO0FBQ3RDLGdCQUFJLFNBQVMsT0FBYixFQUFzQjtBQUNsQix1QkFBTyxRQUFQO0FBQ0g7O0FBRUQsZ0JBQUksTUFBTSxXQUFXLElBQXJCO0FBQUEsZ0JBQ0ksT0FBTyx1QkFBdUIsR0FBdkIsR0FBNkIsc0JBQTdCLEdBQ0gsOEZBRlI7QUFHQSxnQkFBSSxPQUFPLEtBQVAsS0FBaUIsV0FBakIsSUFBZ0MsVUFBVSxFQUE5QyxFQUFrRDtBQUM5Qyx3QkFBUSxTQUFTLEtBQVQsR0FBaUIsT0FBekI7QUFDSDtBQUNELG9CQUFRLFdBQVcsT0FBWCxHQUFxQixlQUE3QjtBQUNBLGNBQUUsY0FBRixFQUFrQixNQUFsQixDQUF5QixJQUF6QjtBQUNIO0FBZE8sS0FBWjs7QUFpQkE7Ozs7QUFJQSxhQUFTLFlBQVQsQ0FBc0IsU0FBdEIsRUFBaUM7QUFDN0IsZUFBTyxJQUFQLENBQVksU0FBWixFQUF1QixPQUF2QixDQUErQixVQUFDLFNBQUQsRUFBZTtBQUMxQyxzQkFBVSxTQUFWLEVBQXFCLE9BQXJCLENBQTZCLFVBQUMsUUFBRCxFQUFjO0FBQ3ZDLGtCQUFFLGNBQUYsRUFBa0IsUUFBbEIsQ0FBMkIsU0FBM0IsRUFBc0MsUUFBdEM7QUFDSCxhQUZEO0FBR0gsU0FKRDtBQUtIOztBQUVEOzs7O0FBSUEsYUFBUyxrQkFBVCxDQUE0QixlQUE1QixFQUE2QztBQUN6QyxZQUFJLENBQUMsZ0JBQWdCLE1BQXJCLEVBQTZCO0FBQ3pCO0FBQ0g7O0FBRUQsaUJBTHlDLENBSy9CO0FBQ1YsVUFBRSxtQkFBRixFQUF1QixPQUF2QixDQUErQixhQUEvQjtB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QjtBQUMzQyxjQUFNLGNBQU47QUFDQSxZQUFJLE9BQU8sRUFBRSxJQUFGLEVBQVEsSUFBUixDQUFhLE1BQWIsQ0FBWDtBQUFBLFlBQ0ksWUFBWSxFQUFFLElBQUYsRUFBUSxNQUFSLEdBQWlCLEdBRGpDO0FBRUEsVUFBRSxZQUFGLEVBQWdCLE9BQWhCLENBQXdCO0FBQ3BCLHVCQUFXLFlBQVksRUFBRSxTQUFGLEVBQWEsTUFBYixFQUFaLEdBQW9DO0FBRDNCLFNBQXhCLEVBRUcsR0FGSDtBQUdILEtBUEQ7QUFRSCxDQXZRRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIiQoZnVuY3Rpb24gKCkge1xuICAgICQuZm4uZXh0ZW5kKHtcbiAgICAgICAgYnNfYWxlcnQ6IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlLCB0aXRsZSkge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2Rhbmdlcic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjbHMgPSAnYWxlcnQtJyArIHR5cGUsXG4gICAgICAgICAgICAgICAgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiYWxlcnQgJyArIGNscyArICcgYWxlcnQtZGlzbWlzc2FibGVcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJhbGVydFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L2J1dHRvbj4nO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aXRsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGl0bGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGg0PicgKyB0aXRsZSArICc8L2g0Pic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBodG1sICs9ICc8c3Bhbj4nICsgbWVzc2FnZSArICc8L3NwYW4+PC9kaXY+JztcbiAgICAgICAgICAgICQoJy5hbGVydC1ibG9jaycpLmFwcGVuZChodG1sKTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFByZXBhcmUgZmxhc2ggbWVzc2FnZXNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZmxhc2hMaXN0XG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZUZsYXNoKGZsYXNoTGlzdCkge1xuICAgICAgICBPYmplY3Qua2V5cyhmbGFzaExpc3QpLmZvckVhY2goKGZsYXNoVHlwZSkgPT4ge1xuICAgICAgICAgICAgZmxhc2hMaXN0W2ZsYXNoVHlwZV0uZm9yRWFjaCgoZmxhc2hNc2cpID0+IHtcbiAgICAgICAgICAgICAgICAkKCcuYWxlcnQtYmxvY2snKS5ic19hbGVydChmbGFzaFR5cGUsIGZsYXNoTXNnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIGZsYXNoIG1lc3NhZ2VzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGZvcm1NZXNzYWdlTGlzdFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVGb3JtTWVzc2FnZShmb3JtTWVzc2FnZUxpc3QpIHtcbiAgICAgICAgaWYgKCFmb3JtTWVzc2FnZUxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkZWJ1Z2dlcjsgLy8gRklYTUU6IGRlbGV0ZSBiZWZvcmUgZGVwbG95IVxuICAgICAgICAkKCcjc2lnbmluZm9ybS1lbWFpbCcpLmNsb3Nlc3QoJy5mb3JtLWdyb3VwJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJlcGFyZSByZXNwb25zZSBkYXRhXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJlc3BvbnNlXG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIHByZXBhcmVGbGFzaChyZXNwb25zZS5mbGFzaCB8fCBbXSk7XG4gICAgICAgIHByZXBhcmVGb3JtTWVzc2FnZShyZXNwb25zZS5mb3JtIHx8IFtdKTtcblxuICAgICAgICBpZiAocmVzcG9uc2UucmVkaXJlY3QpIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKHJlc3BvbnNlLnJlZGlyZWN0KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJCgnLmpzLXZhbGlkYXRlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudmFsaWRhdGUoe1xuICAgICAgICAgICAgc3VibWl0SGFuZGxlcjogZnVuY3Rpb24gKGZvcm0sIGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSAkKGZvcm0pLnNlcmlhbGl6ZSgpOy8vJChmb3JtKS5kYXRhKCd0eXBlJykgPT09ICdKU09OJyA/ICQoZm9ybSkuc2VyaWFsaXplQXJyYXkoKSA6ICQoZm9ybSkuc2VyaWFsaXplKCk7XG5cbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAkKGZvcm0pLmF0dHIoJ21ldGhvZCcpIHx8ICdnZXQnLFxuICAgICAgICAgICAgICAgICAgICB1cmw6ICQoZm9ybSkuYXR0cignYWN0aW9uJykgfHwgJyMnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXBhcmVSZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3VsdDogXCIgKyBzdGF0dXMgKyBcIiBcIiArIGVycm9yICsgXCIgXCIgKyB4aHIuc3RhdHVzICsgXCIgXCIgKyB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlc3BvbnNlIHRleHQ6IFwiICsgeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZmFpbDogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXN1bHQ6IFwiICsgc3RhdHVzICsgXCIgXCIgKyBlcnJvciArIFwiIFwiICsgeGhyLnN0YXR1cyArIFwiIFwiICsgeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXNwb25zZSB0ZXh0OiBcIiArIHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ2ZhaWwnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIFN2ZyBQb2x5ZmlsbFxuICAgIHN2ZzRldmVyeWJvZHkoKTtcblxuICAgIC8vIEhlYWRlciAtIFN0aWNreVxuICAgIGZ1bmN0aW9uIHN0aWNreSgpIHtcbiAgICAgICAgbGV0IG9mZnNldFNjcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICBpZiAob2Zmc2V0U2Nyb2xsID4gMCkge1xuICAgICAgICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdpcy1zdGlja3knKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnaXMtc3RpY2t5Jyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RpY2t5KCk7XG4gICAgJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN0aWNreSgpO1xuICAgIH0pO1xuXG4gICAgLy8gSGVhZGVyIC0gTmF2XG4gICAgJCgnLm5hdicpLm9uKCdjbGljaycsICcubmF2X19idG4nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGh0bWxCbG9jayA9ICQoJ2h0bWwnKTtcbiAgICAgICAgaWYgKGh0bWxCbG9jay5pcygnLmlzLW5hdi1vcGVuJykpIHtcbiAgICAgICAgICAgIGh0bWxCbG9jay5yZW1vdmVDbGFzcygnaXMtbmF2LW9wZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGh0bWxCbG9jay5hZGRDbGFzcygnaXMtbmF2LW9wZW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSGVhZGVyIC0gU2lnbmluXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zaWduaW5fX2J0bicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgaHRtbEJsb2NrID0gJCgnaHRtbCcpLFxuICAgICAgICAgICAgcGFyZW50ID0gJCh0aGlzKS5jbG9zZXN0KCcuc2lnbmluJyk7XG5cbiAgICAgICAgaHRtbEJsb2NrLmlzKCcuaXMtc2lnbmluLWZvcm0tb3BlbicpXG4gICAgICAgICAgICA/IGh0bWxCbG9jay5yZW1vdmVDbGFzcygnaXMtc2lnbmluLWZvcm0tb3BlbicpXG4gICAgICAgICAgICA6IGh0bWxCbG9jay5hZGRDbGFzcygnaXMtc2lnbmluLWZvcm0tb3BlbicpO1xuXG4gICAgICAgIHBhcmVudC5oYXNDbGFzcygnb3BlbicpXG4gICAgICAgICAgICA/IHBhcmVudC5yZW1vdmVDbGFzcygnb3BlbicpXG4gICAgICAgICAgICA6IHBhcmVudC5hZGRDbGFzcygnb3BlbicpO1xuICAgIH0pO1xuXG4gICAgLy8gSGVhZGVyIC0gTGFuZ3VhZ2VcbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmxhbmd1YWdlX19idG4nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGh0bWxCbG9jayA9ICQoJ2h0bWwnKTtcbiAgICAgICAgaWYgKGh0bWxCbG9jay5pcygnLmlzLWxhbmd1YWdlLW9wZW4nKSkge1xuICAgICAgICAgICAgaHRtbEJsb2NrLnJlbW92ZUNsYXNzKCdpcy1sYW5ndWFnZS1vcGVuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBodG1sQmxvY2suYWRkQ2xhc3MoJ2lzLWxhbmd1YWdlLW9wZW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoJChldmVudC50YXJnZXQpLmNsb3Nlc3QoJy5sYW5ndWFnZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdpcy1sYW5ndWFnZS1vcGVuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFNsaWRlc1xuICAgIGxldCBzbGlja1ByZXYgPSAnPGJ1dHRvbiBjbGFzcz1cInNsaWNrLWFycm93IHNsaWNrLXByZXZcIj48c3ZnIGNsYXNzPVwiaWNvbi1wcmV2XCI+PHVzZSB4bGluazpocmVmPVwiL3RoZW1lcy9iYXNpYy9zcHJpdGVzL3Nwcml0ZS5zdmcjaWNvbi1wcmV2XCI+PC91c2U+PC9zdmc+PC9idXR0b24+JyxcbiAgICAgICAgc2xpY2tOZXh0ID0gJzxidXR0b24gY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1uZXh0XCI+PHN2ZyBjbGFzcz1cImljb24tbmV4dFwiPjx1c2UgeGxpbms6aHJlZj1cIi90aGVtZXMvYmFzaWMvc3ByaXRlcy9zcHJpdGUuc3ZnI2ljb24tbmV4dFwiPjwvdXNlPjwvc3ZnPjwvYnV0dG9uPicsXG4gICAgICAgIHNsaWNrUHJldlZlcnRpY2FsID0gJzxidXR0b24gY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1wcmV2XCI+PHN2ZyBjbGFzcz1cImljb24tcHJldi12ZXJ0aWNhbFwiPjx1c2UgeGxpbms6aHJlZj1cIi90aGVtZXMvYmFzaWMvc3ByaXRlcy9zcHJpdGUuc3ZnI2ljb24tcHJldi12ZXJ0aWNhbFwiPjwvdXNlPjwvc3ZnPjwvYnV0dG9uPicsXG4gICAgICAgIHNsaWNrTmV4dFZlcnRpY2FsID0gJzxidXR0b24gY2xhc3M9XCJzbGljay1hcnJvdyBzbGljay1uZXh0XCI+PHN2ZyBjbGFzcz1cImljb24tbmV4dC12ZXJ0aWNhbFwiPjx1c2UgeGxpbms6aHJlZj1cIi90aGVtZXMvYmFzaWMvc3ByaXRlcy9zcHJpdGUuc3ZnI2ljb24tbmV4dC12ZXJ0aWNhbFwiPjwvdXNlPjwvc3ZnPjwvYnV0dG9uPic7XG5cbiAgICAvLyBIZXJvIFNsaWRlc1xuICAgICQoJy5qcy1zbGljay1oZXJvJykuc2xpY2soe1xuICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICBhcnJvd3M6IHRydWUsXG4gICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgIGZhZGU6IGZhbHNlLFxuICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgbmV4dEFycm93OiBzbGlja05leHQsXG4gICAgICAgIHByZXZBcnJvdzogc2xpY2tQcmV2LFxuICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgIHBhdXNlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgIGF1dG9wbGF5U3BlZWQ6IDEwMDAwLFxuICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9KTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IG1xID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cbiAgICAgICAgaWYgKG1xID49IDc2OCkge1xuICAgICAgICAgICAgJCgnLmpzLXNsaWNrLWhlcm8nKS5zbGljaygnc2xpY2tQbGF5Jyk7XG4gICAgICAgIH1cbiAgICB9LCA1MDAwKTtcblxuICAgIC8vIEltYWdlcyBTbGlkZXNcbiAgICAkKCcuanMtcmV2aWV3cycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgcmV2aWV3cyA9ICQodGhpcyksXG4gICAgICAgICAgICByZXZpZXdzU2xpZGVzID0gcmV2aWV3cy5maW5kKCcuanMtcmV2aWV3cy1zbGlkZXMnKSxcbiAgICAgICAgICAgIHJldmlld3NUaHVtYnMgPSByZXZpZXdzLmZpbmQoJy5qcy1yZXZpZXdzLXRodW1icycpO1xuXG4gICAgICAgIHJldmlld3NTbGlkZXMuc2xpY2soe1xuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgICAgICBmYWRlOiB0cnVlLFxuICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgICAgICBhc05hdkZvcjogcmV2aWV3c1RodW1icyxcbiAgICAgICAgICAgIG5leHRBcnJvdzogc2xpY2tOZXh0LFxuICAgICAgICAgICAgcHJldkFycm93OiBzbGlja1ByZXZcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV2aWV3c1RodW1icy5zbGljayh7XG4gICAgICAgICAgICB2ZXJ0aWNhbDogdHJ1ZSxcbiAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXG4gICAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAwLFxuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxuICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICBhc05hdkZvcjogcmV2aWV3c1NsaWRlcyxcbiAgICAgICAgICAgIGFycm93czogdHJ1ZSxcbiAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogdHJ1ZSxcbiAgICAgICAgICAgIG5leHRBcnJvdzogc2xpY2tOZXh0VmVydGljYWwsXG4gICAgICAgICAgICBwcmV2QXJyb3c6IHNsaWNrUHJldlZlcnRpY2FsLFxuICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA5OTEsXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjcsXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvLyBGYW5jeWJveFxuICAgICQoJ1tkYXRhLWZhbmN5Ym94XScpLmZhbmN5Ym94KHtcbiAgICAgICAgdHlwZTogJ2lubGluZScsXG4gICAgICAgIHRvdWNoOiBmYWxzZSxcbiAgICAgICAgYnV0dG9uczogW11cbiAgICB9KTtcblxuICAgIC8vIEZvcm1zXG4gICAgJCgnc2VsZWN0Jykuc3R5bGVyKHtcbiAgICAgICAgc2VsZWN0U2VhcmNoOiBmYWxzZSxcbiAgICAgICAgc2VsZWN0U21hcnRQb3NpdGlvbmluZzogZmFsc2VcbiAgICB9KTtcblxuICAgIC8vIEFjY29yZGlvblxuICAgICQoJy5qcy1hY2NvcmRpb24nKS5vbignY2xpY2snLCAnZHQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCQodGhpcykuaXMoJy5pcy1hY3RpdmUnKSkge1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJykubmV4dCgnZGQnKS5zbGlkZVVwKCdmYXN0Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5qcy1hY2NvcmRpb24nKS5maW5kKCdkdCcpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmpzLWFjY29yZGlvbicpLmZpbmQoJ2RkJykuc2xpZGVVcCgnZmFzdCcpO1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtYWN0aXZlJykubmV4dCgnZGQnKS5zbGlkZURvd24oJ2Zhc3QnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gU2Nyb2xsVG9cbiAgICAkKCcuanMtc2Nyb2xsdG8nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IGhyZWYgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgIG9mZnNldFRvcCA9ICQoaHJlZikub2Zmc2V0KCkudG9wO1xuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICBzY3JvbGxUb3A6IG9mZnNldFRvcCAtICQoJy5oZWFkZXInKS5oZWlnaHQoKSAtIDE0XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfSk7XG59KTtcbiJdfQ==
